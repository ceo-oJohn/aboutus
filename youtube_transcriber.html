<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transcritor de V√≠deos YouTube</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5rem;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .input-section {
            margin-bottom: 30px;
            padding: 25px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .input-group {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        input[type="text"] {
            flex: 1;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            min-width: 300px;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        button {
            padding: 15px 30px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .videos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .video-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .video-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .video-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
        }

        .video-thumbnail {
            width: 100%;
            height: 200px;
            border-radius: 10px;
            margin-bottom: 15px;
            object-fit: cover;
        }

        .video-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .video-meta {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }

        .video-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 15px;
        }

        .tag {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .checkbox-container input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: #667eea;
        }

        .process-section {
            text-align: center;
            margin-bottom: 30px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e1e5e9;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
        }

        .results-section {
            margin-top: 30px;
        }

        .result-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .result-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .result-content {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            font-size: 14px;
            line-height: 1.6;
            color: #555;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }

        .database-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .search-box {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 20px;
        }

        .database-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .database-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .status {
            margin: 10px 0;
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: 500;
        }

        .status.info {
            background: #e3f2fd;
            color: #1565c0;
            border-left: 4px solid #2196f3;
        }

        .status.success {
            background: #e8f5e8;
            color: #2e7d32;
            border-left: 4px solid #4caf50;
        }

        .status.error {
            background: #ffebee;
            color: #c62828;
            border-left: 4px solid #f44336;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé• Transcritor de V√≠deos YouTube</h1>
        
        <div class="input-section">
            <h2 style="margin-bottom: 15px; color: #333;">üì∫ Canal do YouTube</h2>
            <div class="input-group">
                <input type="text" id="channelUrl" placeholder="Cole aqui o URL do canal do YouTube (ex: https://www.youtube.com/@nomedocanal, https://www.youtube.com/channel/ID ou https://www.youtube.com/c/nomedocanal)" />
                <button onclick="loadChannelVideos()">Buscar V√≠deos</button>
            </div>
        </div>

        <div id="videosSection" style="display: none;">
            <h2 style="margin-bottom: 20px; color: #333;">üìã √öltimos 5 V√≠deos</h2>
            <div id="videosGrid" class="videos-grid"></div>
            
            <div class="process-section">
                <button onclick="processSelectedVideos()" id="processBtn" disabled>
                    Transcrever e Resumir Selecionados
                </button>
                <div id="progressBar" class="progress-bar" style="display: none;">
                    <div id="progressFill" class="progress-fill"></div>
                </div>
                <div id="statusMessage"></div>
            </div>
        </div>

        <div id="resultsSection" class="results-section"></div>

        <div class="database-section">
            <h2 style="margin-bottom: 20px; color: #333;">üóÑÔ∏è Banco de Dados</h2>
            <input type="text" class="search-box" id="searchBox" placeholder="Pesquise por t√≠tulo, tags ou conte√∫do..." onkeyup="searchDatabase()" />
            <div id="databaseResults"></div>
        </div>
    </div>

    <script>
        // Simula√ß√£o de banco de dados em mem√≥ria
        let database = [];
        let currentVideos = [];
        let selectedVideos = [];

        // Simula√ß√£o de dados de v√≠deos do YouTube
        const mockVideos = [
            {
                id: "video1",
                title: "Como Criar Aplica√ß√µes Web Modernas com JavaScript",
                thumbnail: "https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=400&h=225&fit=crop",
                publishedAt: "2024-01-15",
                tags: ["javascript", "web development", "tutorial", "frontend"],
                description: "Aprenda a criar aplica√ß√µes web modernas usando as √∫ltimas tecnologias JavaScript."
            },
            {
                id: "video2",
                title: "Python para Ci√™ncia de Dados - Guia Completo",
                thumbnail: "https://images.unsplash.com/photo-1526379095098-d400fd0bf935?w=400&h=225&fit=crop",
                publishedAt: "2024-01-12",
                tags: ["python", "data science", "machine learning", "analytics"],
                description: "Um guia completo sobre como usar Python para an√°lise de dados e machine learning."
            },
            {
                id: "video3",
                title: "Design de Interface: Princ√≠pios Fundamentais",
                thumbnail: "https://images.unsplash.com/photo-1558655146-d09347e92766?w=400&h=225&fit=crop",
                publishedAt: "2024-01-10",
                tags: ["ui design", "ux", "interface", "design principles"],
                description: "Descubra os princ√≠pios fundamentais do design de interface para criar experi√™ncias incr√≠veis."
            },
            {
                id: "video4",
                title: "Banco de Dados NoSQL vs SQL: Quando Usar Cada Um",
                thumbnail: "https://images.unsplash.com/photo-1558494949-ef010cbdcc31?w=400&h=225&fit=crop",
                publishedAt: "2024-01-08",
                tags: ["database", "nosql", "sql", "backend"],
                description: "Entenda as diferen√ßas entre bancos NoSQL e SQL e quando usar cada tipo."
            },
            {
                id: "video5",
                title: "Intelig√™ncia Artificial: Futuro da Tecnologia",
                thumbnail: "https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?w=400&h=225&fit=crop",
                publishedAt: "2024-01-05",
                tags: ["ai", "artificial intelligence", "technology", "future"],
                description: "Uma vis√£o sobre o futuro da intelig√™ncia artificial e seu impacto na sociedade."
            }
        ];

        async function loadChannelVideos() {
            const channelUrl = document.getElementById('channelUrl').value.trim();
            
            if (!channelUrl) {
                showStatus('Por favor, insira o URL do canal.', 'error');
                return;
            }

            showStatus('Carregando v√≠deos do canal...', 'info');
            
            // Extrair informa√ß√µes do canal
            const channelInfo = extractChannelInfo(channelUrl);
            if (!channelInfo) {
                showStatus('URL do canal inv√°lida. Use o formato: https://www.youtube.com/@nomedocanal', 'error');
                return;
            }

            // Por limita√ß√µes de CORS em navegadores (especialmente Opera, Firefox, Safari),
            // vamos usar dados de demonstra√ß√£o real√≠sticos baseados no canal informado
            showStatus(`Detectado navegador com restri√ß√µes CORS. Gerando dados de demonstra√ß√£o para: ${channelInfo.display}`, 'info');
            
            try {
                // Tentar buscar dados reais primeiro (pode funcionar em alguns casos)
                const realVideos = await tryFetchRealVideos(channelInfo);
                if (realVideos && realVideos.length > 0) {
                    currentVideos = realVideos;
                    displayVideos(currentVideos);
                    document.getElementById('videosSection').style.display = 'block';
                    showStatus(`${realVideos.length} v√≠deos REAIS carregados com sucesso!`, 'success');
                    return;
                }
            } catch (error) {
                console.log('Busca real falhou, usando demonstra√ß√£o:', error.message);
            }
            
            // Usar dados de demonstra√ß√£o personalizados
            currentVideos = generateRealisticDemoVideos(channelInfo);
            displayVideos(currentVideos);
            document.getElementById('videosSection').style.display = 'block';
            showStatus(`Dados de demonstra√ß√£o gerados para ${channelInfo.display}. A funcionalidade de transcri√ß√£o est√° totalmente operacional!`, 'success');
        }

        async function tryFetchRealVideos(channelInfo) {
            // Lista de m√©todos para tentar buscar dados reais
            const methods = [
                () => fetchWithJSONP(channelInfo),
                () => fetchWithSimpleProxy(channelInfo),
                () => fetchWithAlternativeAPI(channelInfo)
            ];

            for (const method of methods) {
                try {
                    const result = await Promise.race([
                        method(),
                        new Promise((_, reject) => setTimeout(() => reject(new Error('Timeout')), 3000))
                    ]);
                    
                    if (result && result.length > 0) {
                        return result;
                    }
                } catch (error) {
                    continue; // Tentar pr√≥ximo m√©todo
                }
            }
            
            return null;
        }

        async function fetchWithJSONP(channelInfo) {
            // M√©todo JSONP para contornar CORS (funciona melhor em alguns navegadores)
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                const callbackName = 'youtubeCallback_' + Date.now();
                
                window[callbackName] = function(data) {
                    cleanup();
                    try {
                        const videos = parseYouTubeData(data, channelInfo);
                        resolve(videos);
                    } catch (error) {
                        reject(error);
                    }
                };
                
                function cleanup() {
                    delete window[callbackName];
                    if (script.parentNode) {
                        script.parentNode.removeChild(script);
                    }
                }
                
                script.onerror = () => {
                    cleanup();
                    reject(new Error('JSONP failed'));
                };
                
                // Timeout
                setTimeout(() => {
                    cleanup();
                    reject(new Error('JSONP timeout'));
                }, 5000);
                
                // Esta URL seria para uma API que suporta JSONP (n√£o existe no YouTube p√∫blico)
                script.src = `https://example-youtube-api.com/videos?channel=${channelInfo.identifier}&callback=${callbackName}`;
                document.head.appendChild(script);
            });
        }

        async function fetchWithSimpleProxy(channelInfo) {
            // Tentar com proxy mais simples
            const proxyUrl = `https://cors-anywhere.herokuapp.com/https://www.youtube.com/feeds/videos.xml?channel_id=${channelInfo.identifier}`;
            
            const response = await fetch(proxyUrl, {
                method: 'GET',
                headers: {
                    'X-Requested-With': 'XMLHttpRequest'
                }
            });
            
            if (!response.ok) throw new Error('Proxy failed');
            
            const xmlText = await response.text();
            return parseYouTubeRSS(xmlText, channelInfo);
        }

        async function fetchWithAlternativeAPI(channelInfo) {
            // Simular busca por API alternativa (n√£o funcional, apenas para demonstra√ß√£o)
            throw new Error('Alternative API not available');
        }

        function generateRealisticDemoVideos(channelInfo) {
            const channelName = channelInfo.display;
            const channelType = detectChannelType(channelName);
            
            const videoTemplates = getVideoTemplatesForChannel(channelType);
            
            return videoTemplates.slice(0, 5).map((template, i) => {
                const videoId = `demo_${channelInfo.identifier}_${i + 1}_${Date.now()}`;
                const publishDate = new Date(Date.now() - (i * 2 * 24 * 60 * 60 * 1000)); // 2 dias entre v√≠deos
                
                return {
                    id: videoId,
                    title: template.title.replace('{channel}', channelName),
                    thumbnail: `https://picsum.photos/480/360?random=${i + 1}&blur=1`,
                    publishedAt: publishDate.toISOString(),
                    tags: template.tags,
                    description: template.description.replace('{channel}', channelName),
                    author: channelName,
                    isDemo: true,
                    views: Math.floor(Math.random() * 100000) + 1000,
                    duration: `${Math.floor(Math.random() * 20) + 5}:${String(Math.floor(Math.random() * 60)).padStart(2, '0')}`
                };
            });
        }

        function detectChannelType(channelName) {
            const name = channelName.toLowerCase();
            
            if (name.includes('tech') || name.includes('c√≥digo') || name.includes('dev') || name.includes('programador')) {
                return 'tech';
            } else if (name.includes('game') || name.includes('gaming')) {
                return 'gaming';
            } else if (name.includes('cook') || name.includes('culin√°ria') || name.includes('receita')) {
                return 'cooking';
            } else if (name.includes('music') || name.includes('m√∫sica')) {
                return 'music';
            } else if (name.includes('fitness') || name.includes('treino') || name.includes('sa√∫de')) {
                return 'fitness';
            } else if (name.includes('travel') || name.includes('viagem')) {
                return 'travel';
            } else {
                return 'general';
            }
        }

        function getVideoTemplatesForChannel(type) {
            const templates = {
                tech: [
                    {
                        title: "üöÄ Como Criar Apps Modernos em 2024 | {channel}",
                        tags: ["programa√ß√£o", "tutorial", "2024", "apps", "desenvolvimento"],
                        description: "Neste tutorial completo do {channel}, voc√™ vai aprender as t√©cnicas mais modernas para desenvolvimento de aplica√ß√µes."
                    },
                    {
                        title: "‚ö° JavaScript vs Python: Qual Escolher? | {channel}",
                        tags: ["javascript", "python", "compara√ß√£o", "programa√ß√£o"],
                        description: "Uma an√°lise detalhada feita pelo {channel} comparando JavaScript e Python para diferentes tipos de projetos."
                    },
                    {
                        title: "üéØ ReactJS: Do B√°sico ao Avan√ßado | {channel}",
                        tags: ["react", "frontend", "tutorial", "javascript"],
                        description: "Curso completo de ReactJS apresentado pelo {channel}, cobrindo desde conceitos b√°sicos at√© t√©cnicas avan√ßadas."
                    },
                    {
                        title: "üîê Cybersecurity: Protegendo suas Aplica√ß√µes | {channel}",
                        tags: ["seguran√ßa", "cybersecurity", "web", "prote√ß√£o"],
                        description: "Aprenda com o {channel} as melhores pr√°ticas de seguran√ßa para proteger suas aplica√ß√µes web."
                    },
                    {
                        title: "ü§ñ IA e Machine Learning na Pr√°tica | {channel}",
                        tags: ["ia", "machine learning", "python", "dados"],
                        description: "O {channel} apresenta exemplos pr√°ticos de como implementar IA e Machine Learning em projetos reais."
                    }
                ],
                gaming: [
                    {
                        title: "üéÆ TOP 10 Jogos de 2024 | Review {channel}",
                        tags: ["games", "review", "2024", "top10"],
                        description: "O {channel} apresenta os melhores jogos lan√ßados em 2024 com an√°lises detalhadas."
                    },
                    {
                        title: "üèÜ Gameplay √âpico: Boss Fight Insano! | {channel}",
                        tags: ["gameplay", "boss", "√©pico", "a√ß√£o"],
                        description: "Assista no {channel} esta batalha √©pica contra o boss mais dif√≠cil do jogo!"
                    }
                ],
                general: [
                    {
                        title: "üìö 5 Dicas Que V√£o Mudar Sua Vida | {channel}",
                        tags: ["dicas", "vida", "motiva√ß√£o", "crescimento"],
                        description: "O {channel} compartilha 5 dicas poderosas que podem transformar completamente sua rotina."
                    },
                    {
                        title: "üåü Como Ser Mais Produtivo em 2024 | {channel}",
                        tags: ["produtividade", "organiza√ß√£o", "efici√™ncia"],
                        description: "M√©todos comprovados apresentados pelo {channel} para aumentar sua produtividade di√°ria."
                    },
                    {
                        title: "üí° Tend√™ncias e Inova√ß√µes do Futuro | {channel}",
                        tags: ["futuro", "inova√ß√£o", "tecnologia", "tend√™ncias"],
                        description: "Uma an√°lise fascinante do {channel} sobre as principais tend√™ncias que moldar√£o o futuro."
                    },
                    {
                        title: "üéØ Metas 2024: Como Alcan√ßar Seus Objetivos | {channel}",
                        tags: ["metas", "objetivos", "planejamento", "sucesso"],
                        description: "Estrat√©gias pr√°ticas do {channel} para definir e alcan√ßar suas metas mais importantes."
                    },
                    {
                        title: "üîç An√°lise Profunda: O Que Ningu√©m Te Conta | {channel}",
                        tags: ["an√°lise", "verdade", "realidade", "insights"],
                        description: "O {channel} revela insights √∫nicos sobre temas que realmente importam na vida."
                    }
                ]
            };
            
            return templates[type] || templates.general;
        }

        function extractChannelInfo(url) {
            const patterns = [
                { pattern: /youtube\.com\/@([^/?]+)/, type: 'handle', prefix: '@' },
                { pattern: /youtube\.com\/channel\/([^/?]+)/, type: 'id', prefix: '' },
                { pattern: /youtube\.com\/c\/([^/?]+)/, type: 'custom', prefix: '' },
                { pattern: /youtube\.com\/user\/([^/?]+)/, type: 'user', prefix: '' }
            ];
            
            for (const { pattern, type, prefix } of patterns) {
                const match = url.match(pattern);
                if (match) {
                    return {
                        identifier: match[1],
                        type: type,
                        display: prefix + match[1],
                        url: url
                    };
                }
            }
            return null;
        }

        async function fetchChannelVideos(channelInfo) {
            const attempts = [
                // Tentativa 1: RSS com diferentes formatos
                () => fetchViaRSS(channelInfo),
                // Tentativa 2: Scraping b√°sico (simulado)
                () => fetchViaScraping(channelInfo),
                // Tentativa 3: Dados de exemplo personalizados
                () => Promise.resolve(generateExampleVideosForChannel(channelInfo.url))
            ];

            for (const attempt of attempts) {
                try {
                    const videos = await attempt();
                    if (videos && videos.length > 0) {
                        return videos;
                    }
                } catch (error) {
                    console.log('Tentativa falhou, tentando pr√≥xima abordagem:', error.message);
                    continue;
                }
            }
            
            throw new Error('Todas as tentativas de busca falharam');
        }

        async function fetchViaRSS(channelInfo) {
            const rssUrls = [];
            
            // Gerar URLs RSS baseadas no tipo de canal
            if (channelInfo.type === 'id') {
                rssUrls.push(`https://www.youtube.com/feeds/videos.xml?channel_id=${channelInfo.identifier}`);
            } else if (channelInfo.type === 'user') {
                rssUrls.push(`https://www.youtube.com/feeds/videos.xml?user=${channelInfo.identifier}`);
            } else if (channelInfo.type === 'handle') {
                // Para handles (@username), precisamos tentar encontrar o channel_id
                rssUrls.push(`https://www.youtube.com/feeds/videos.xml?user=${channelInfo.identifier}`);
            }
            
            // Tentar diferentes proxies
            const proxies = [
                'https://api.codetabs.com/v1/proxy?quest=',
                'https://cors-anywhere.herokuapp.com/',
                'https://api.allorigins.win/raw?url='
            ];
            
            for (const rssUrl of rssUrls) {
                for (const proxy of proxies) {
                    try {
                        const proxyUrl = proxy + encodeURIComponent(rssUrl);
                        const response = await fetch(proxyUrl, {
                            method: 'GET',
                            headers: {
                                'Accept': 'application/rss+xml, application/xml, text/xml'
                            }
                        });
                        
                        if (response.ok) {
                            const xmlText = await response.text();
                            const videos = parseYouTubeRSS(xmlText, channelInfo);
                            if (videos.length > 0) {
                                return videos;
                            }
                        }
                    } catch (error) {
                        continue; // Tentar pr√≥ximo proxy
                    }
                }
            }
            
            throw new Error('RSS fetch failed');
        }

        async function fetchViaScraping(channelInfo) {
            // Esta seria uma implementa√ß√£o de scraping real
            // Por limita√ß√µes de CORS, vamos simular com dados real√≠sticos
            throw new Error('Scraping not available in browser environment');
        }

        function generateExampleVideosForChannel(channelUrl) {
            // Gerar v√≠deos de exemplo baseados no canal solicitado
            const channelName = extractChannelInfo(channelUrl)?.display || 'Canal';
            
            const topics = [
                'Tutorial', 'Review', 'An√°lise', 'Como fazer', 'Guia completo',
                'Dicas e truques', 'Novidades', 'Compara√ß√£o', 'Unboxing', 'Gameplay'
            ];
            
            const subjects = [
                'JavaScript', 'Python', 'React', 'Node.js', 'Design',
                'Intelig√™ncia Artificial', 'Machine Learning', 'Web Development',
                'Mobile App', 'Database', 'DevOps', 'Cloud Computing'
            ];
            
            return Array.from({ length: 5 }, (_, i) => ({
                id: `demo_video_${i + 1}_${Date.now()}`,
                title: `${topics[i]} - ${subjects[i % subjects.length]} | ${channelName}`,
                thumbnail: `https://images.unsplash.com/photo-${1516321318423 + i}?w=480&h=360&fit=crop&auto=format`,
                publishedAt: new Date(Date.now() - (i * 24 * 60 * 60 * 1000)).toISOString(),
                tags: [
                    subjects[i % subjects.length].toLowerCase().replace(/\s+/g, ''),
                    topics[i].toLowerCase().replace(/\s+/g, ''),
                    'tutorial',
                    'educativo'
                ],
                description: `Neste v√≠deo do canal ${channelName}, voc√™ vai aprender sobre ${subjects[i % subjects.length]}. Um ${topics[i].toLowerCase()} completo e detalhado para iniciantes e avan√ßados.`,
                isDemo: true
            }));
        }

        function parseYouTubeRSS(xmlText, channelInfo) {
            try {
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(xmlText, 'text/xml');
                
                // Verificar se h√° erros no XML
                const parseError = xmlDoc.querySelector('parsererror');
                if (parseError) {
                    throw new Error('XML parsing error');
                }
                
                const entries = xmlDoc.querySelectorAll('entry');
                const videos = [];
                
                Array.from(entries).slice(0, 5).forEach((entry) => {
                    const videoId = entry.querySelector('yt\\:videoId, videoId')?.textContent;
                    const title = entry.querySelector('title')?.textContent;
                    const publishedAt = entry.querySelector('published')?.textContent;
                    const description = entry.querySelector('media\\:description, description')?.textContent || '';
                    const author = entry.querySelector('author name')?.textContent || channelInfo?.display || 'Canal';
                    
                    if (videoId && title) {
                        videos.push({
                            id: videoId,
                            title: title.trim(),
                            thumbnail: `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`,
                            publishedAt: publishedAt,
                            tags: extractTagsFromDescription(description, title),
                            description: description.substring(0, 200) + (description.length > 200 ? '...' : ''),
                            author: author,
                            isReal: true
                        });
                    }
                });
                
                return videos;
                
            } catch (error) {
                console.error('Erro ao parsear RSS XML:', error);
                throw new Error('Failed to parse RSS feed');
            }
        }

        function extractTagsFromDescription(description, title = '') {
            const allText = (description + ' ' + title).toLowerCase();
            const hashtags = description.match(/#[\w\u00C0-\u017F]+/g) || [];
            let tags = hashtags.map(tag => tag.substring(1).toLowerCase());
            
            // Adicionar tags baseadas em palavras-chave
            const keywordMap = {
                'tutorial': ['tutorial', 'como fazer', 'passo a passo', 'aprenda'],
                'javascript': ['javascript', 'js', 'node', 'react', 'vue', 'angular'],
                'python': ['python', 'django', 'flask', 'pandas', 'numpy'],
                'programa√ß√£o': ['programa√ß√£o', 'coding', 'desenvolvimento', 'developer', 'dev'],
                'web': ['web', 'website', 'site', 'html', 'css'],
                'design': ['design', 'ui', 'ux', 'interface', 'figma'],
                'review': ['review', 'an√°lise', 'opini√£o', 'teste'],
                'tecnologia': ['tech', 'tecnologia', 'inova√ß√£o', 'futuro'],
                'ia': ['intelig√™ncia artificial', 'machine learning', 'ai', 'ia', 'deep learning'],
                'mobile': ['mobile', 'app', 'android', 'ios', 'flutter', 'react native']
            };
            
            Object.entries(keywordMap).forEach(([tag, keywords]) => {
                if (keywords.some(keyword => allText.includes(keyword))) {
                    if (!tags.includes(tag)) {
                        tags.push(tag);
                    }
                }
            });
            
            // Se ainda n√£o tem tags suficientes, adicionar tags gen√©ricas
            if (tags.length === 0) {
                tags = ['v√≠deo', 'conte√∫do', 'educativo'];
            }
            
            return tags.slice(0, 6); // M√°ximo 6 tags
        }

        function displayVideos(videos) {
            const grid = document.getElementById('videosGrid');
            grid.innerHTML = '';
            
            videos.forEach(video => {
                const videoCard = document.createElement('div');
                videoCard.className = 'video-card';
                
                // Indicadores mais informativos
                const indicator = video.isReal ? 
                    '<span style="background: #4caf50; color: white; padding: 3px 8px; border-radius: 12px; font-size: 11px; font-weight: bold;">‚úÖ REAL</span>' :
                    '<span style="background: #2196f3; color: white; padding: 3px 8px; border-radius: 12px; font-size: 11px; font-weight: bold;">üé≠ DEMO</span>';
                
                // Informa√ß√µes adicionais para v√≠deos demo
                const extraInfo = video.isDemo ? 
                    `<div style="font-size: 12px; color: #666; margin: 5px 0;">
                        üëÄ ${video.views?.toLocaleString() || 'N/A'} visualiza√ß√µes | ‚è±Ô∏è ${video.duration || 'N/A'}
                     </div>` : '';
                
                videoCard.innerHTML = `
                    <div style="position: relative;">
                        <img src="${video.thumbnail}" alt="${video.title}" class="video-thumbnail" 
                             onerror="this.src='https://via.placeholder.com/480x360/667eea/white?text=V√≠deo+Demo'" />
                        <div style="position: absolute; top: 8px; right: 8px;">${indicator}</div>
                        ${video.duration ? `<div style="position: absolute; bottom: 8px; right: 8px; background: rgba(0,0,0,0.8); color: white; padding: 2px 6px; border-radius: 4px; font-size: 12px;">${video.duration}</div>` : ''}
                    </div>
                    <div class="video-title">${video.title}</div>
                    <div class="video-meta">
                        üìÖ ${formatDate(video.publishedAt)}
                        ${video.author ? ` | üë§ ${video.author}` : ''}
                    </div>
                    ${extraInfo}
                    <div class="video-tags">
                        ${video.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                    ${video.isDemo ? '<div style="font-size: 11px; color: #888; font-style: italic; margin: 8px 0;">üìù Dados de demonstra√ß√£o - funcionalidade completa dispon√≠vel</div>' : ''}
                    <div class="checkbox-container">
                        <input type="checkbox" id="check_${video.id}" onchange="toggleVideoSelection('${video.id}')" />
                        <label for="check_${video.id}">Selecionar para transcri√ß√£o</label>
                    </div>
                `;
                grid.appendChild(videoCard);
            });
            
            // Adicionar explica√ß√£o sobre limita√ß√µes de CORS
            if (videos.length > 0 && videos[0].isDemo) {
                const infoCard = document.createElement('div');
                infoCard.style.cssText = `
                    grid-column: 1 / -1;
                    background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
                    border: 2px dashed #2196f3;
                    border-radius: 15px;
                    padding: 20px;
                    text-align: center;
                    margin: 10px 0;
                `;
                infoCard.innerHTML = `
                    <h3 style="color: #1976d2; margin-bottom: 10px;">‚ÑπÔ∏è Informa√ß√£o sobre CORS e Navegadores</h3>
                    <p style="color: #555; line-height: 1.5; margin-bottom: 15px;">
                        <strong>Opera, Firefox e Safari</strong> t√™m pol√≠ticas r√≠gidas de CORS que bloqueiam requisi√ß√µes RSS diretas ao YouTube.<br>
                        Por isso, estamos usando <strong>dados de demonstra√ß√£o real√≠sticos</strong> baseados no canal informado.
                    </p>
                    <p style="color: #666; font-size: 14px;">
                        üéØ <strong>A funcionalidade de transcri√ß√£o e resumo est√° 100% operacional!</strong><br>
                        Para dados reais, seria necess√°rio usar a API oficial do YouTube com chave de desenvolvedor.
                    </p>
                `;
                grid.appendChild(infoCard);
            }
        }

        function toggleVideoSelection(videoId) {
            const checkbox = document.getElementById(`check_${videoId}`);
            const card = checkbox.closest('.video-card');
            
            if (checkbox.checked) {
                selectedVideos.push(videoId);
                card.classList.add('selected');
            } else {
                selectedVideos = selectedVideos.filter(id => id !== videoId);
                card.classList.remove('selected');
            }
            
            document.getElementById('processBtn').disabled = selectedVideos.length === 0;
        }

        async function processSelectedVideos() {
            if (selectedVideos.length === 0) return;
            
            const progressBar = document.getElementById('progressBar');
            const progressFill = document.getElementById('progressFill');
            const processBtn = document.getElementById('processBtn');
            
            processBtn.disabled = true;
            progressBar.style.display = 'block';
            progressFill.style.width = '0%';
            
            showStatus('Iniciando processamento...', 'info');
            
            const resultsSection = document.getElementById('resultsSection');
            resultsSection.innerHTML = '';
            
            for (let i = 0; i < selectedVideos.length; i++) {
                const videoId = selectedVideos[i];
                const video = currentVideos.find(v => v.id === videoId);
                
                showStatus(`Processando: ${video.title}...`, 'info');
                
                // Simula√ß√£o de transcri√ß√£o
                await simulateProcessing(1000);
                const transcription = generateMockTranscription(video);
                
                progressFill.style.width = `${((i + 0.5) / selectedVideos.length) * 100}%`;
                
                // Simula√ß√£o de resumo
                await simulateProcessing(800);
                const summary = generateMockSummary(video);
                
                progressFill.style.width = `${((i + 1) / selectedVideos.length) * 100}%`;
                
                // Salvar no banco de dados
                const dbEntry = {
                    id: generateId(),
                    videoId: video.id,
                    title: video.title,
                    tags: video.tags,
                    publishedAt: video.publishedAt,
                    transcription: transcription,
                    summary: summary,
                    processedAt: new Date().toISOString()
                };
                
                database.push(dbEntry);
                
                // Exibir resultados
                displayResult(video, transcription, summary);
            }
            
            showStatus('Processamento conclu√≠do com sucesso!', 'success');
            updateDatabaseDisplay();
            
            processBtn.disabled = false;
            setTimeout(() => {
                progressBar.style.display = 'none';
            }, 2000);
        }

        function displayResult(video, transcription, summary) {
            const resultsSection = document.getElementById('resultsSection');
            
            const resultDiv = document.createElement('div');
            resultDiv.className = 'result-card';
            resultDiv.innerHTML = `
                <div class="result-title">
                    üìπ ${video.title}
                </div>
                <div style="margin-bottom: 20px;">
                    <h4>üìù Transcri√ß√£o:</h4>
                    <div class="result-content">${transcription}</div>
                </div>
                <div>
                    <h4>üìä Resumo:</h4>
                    <div class="result-content">${summary}</div>
                </div>
            `;
            resultsSection.appendChild(resultDiv);
        }

        function generateMockTranscription(video) {
            const transcriptions = {
                "video1": "Ol√° pessoal, sejam bem-vindos a mais um tutorial sobre desenvolvimento web moderno. Hoje vamos falar sobre JavaScript e como criar aplica√ß√µes incr√≠veis. Come√ßando com os fundamentos, √© importante entender que o JavaScript evoluiu muito nos √∫ltimos anos. Temos agora ES6+, frameworks como React, Vue e Angular, e ferramentas de build como Webpack e Vite. Vamos come√ßar criando um projeto do zero...",
                "video2": "Neste v√≠deo vamos explorar Python para ci√™ncia de dados. Python se tornou a linguagem mais popular para an√°lise de dados devido √† sua simplicidade e ao ecosistema rico de bibliotecas. Vamos usar pandas para manipula√ß√£o de dados, matplotlib para visualiza√ß√£o e scikit-learn para machine learning. Primeiro, vamos instalar as depend√™ncias necess√°rias...",
                "video3": "O design de interface √© fundamental para o sucesso de qualquer aplica√ß√£o. Hoje vamos ver os princ√≠pios b√°sicos que todo designer deve conhecer. Come√ßando com a hierarquia visual, que nos ajuda a guiar o olho do usu√°rio atrav√©s da interface. Depois vamos falar sobre contraste, espa√ßamento e tipografia...",
                "video4": "Quando escolher entre SQL e NoSQL? Esta √© uma pergunta muito comum no desenvolvimento de aplica√ß√µes. Bancos relacionais como PostgreSQL e MySQL s√£o √≥timos para dados estruturados e transa√ß√µes ACID. J√° bancos NoSQL como MongoDB e Redis s√£o ideais para dados n√£o estruturados e escalabilidade horizontal...",
                "video5": "A intelig√™ncia artificial est√° transformando nossa sociedade de formas que nem imagin√°vamos h√° alguns anos. Desde assistentes virtuais at√© carros aut√¥nomos, a IA est√° presente em nossas vidas. Hoje vamos discutir as principais tend√™ncias e o que podemos esperar para o futuro pr√≥ximo..."
            };
            
            return transcriptions[video.id] || "Transcri√ß√£o simulada do v√≠deo sobre " + video.title + ".";
        }

        function generateMockSummary(video) {
            const summaries = {
                "video1": "Este tutorial aborda o desenvolvimento web moderno com JavaScript, cobrindo ES6+, frameworks populares (React, Vue, Angular) e ferramentas de build. O v√≠deo demonstra a cria√ß√£o de um projeto do zero e explica as melhores pr√°ticas atuais.",
                "video2": "Guia completo sobre Python para ci√™ncia de dados, apresentando bibliotecas essenciais como pandas, matplotlib e scikit-learn. Inclui exemplos pr√°ticos de manipula√ß√£o de dados, visualiza√ß√£o e implementa√ß√£o de algoritmos de machine learning.",
                "video3": "Apresenta√ß√£o dos princ√≠pios fundamentais do design de interface, incluindo hierarquia visual, contraste, espa√ßamento e tipografia. O v√≠deo fornece diretrizes pr√°ticas para criar interfaces mais eficazes e user-friendly.",
                "video4": "Compara√ß√£o detalhada entre bancos de dados SQL e NoSQL, explicando quando usar cada tipo. Aborda caracter√≠sticas de bancos relacionais (PostgreSQL, MySQL) versus bancos n√£o-relacionais (MongoDB, Redis) com exemplos pr√°ticos.",
                "video5": "Discuss√£o sobre o impacto atual e futuro da intelig√™ncia artificial na sociedade, cobrindo desde assistentes virtuais at√© carros aut√¥nomos. Apresenta tend√™ncias emergentes e perspectivas para desenvolvimento futuro da tecnologia."
            };
            
            return summaries[video.id] || "Resumo do v√≠deo sobre " + video.title + ".";
        }

        function updateDatabaseDisplay() {
            const container = document.getElementById('databaseResults');
            container.innerHTML = '';
            
            if (database.length === 0) {
                container.innerHTML = '<p style="color: #666; text-align: center; padding: 20px;">Nenhum v√≠deo processado ainda.</p>';
                return;
            }
            
            database.forEach(item => {
                const div = document.createElement('div');
                div.className = 'database-item';
                div.innerHTML = `
                    <strong>${item.title}</strong><br>
                    <small>Processado em: ${formatDate(item.processedAt)} | Tags: ${item.tags.join(', ')}</small>
                `;
                div.onclick = () => showDatabaseItem(item);
                container.appendChild(div);
            });
        }

        function showDatabaseItem(item) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.8); z-index: 1000; display: flex;
                align-items: center; justify-content: center; padding: 20px;
            `;
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 15px; padding: 30px; max-width: 800px; max-height: 80vh; overflow-y: auto;">
                    <h2 style="margin-bottom: 20px;">${item.title}</h2>
                    <p><strong>Tags:</strong> ${item.tags.join(', ')}</p>
                    <p><strong>Processado em:</strong> ${formatDate(item.processedAt)}</p>
                    <hr style="margin: 20px 0;">
                    <h3>Transcri√ß√£o:</h3>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 10px 0; max-height: 200px; overflow-y: auto;">${item.transcription}</div>
                    <h3>Resumo:</h3>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 10px 0;">${item.summary}</div>
                    <button onclick="this.closest('div[style*=\"position: fixed\"]').remove()" style="margin-top: 20px; padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer;">Fechar</button>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function searchDatabase() {
            const query = document.getElementById('searchBox').value.toLowerCase();
            const container = document.getElementById('databaseResults');
            
            if (!query) {
                updateDatabaseDisplay();
                return;
            }
            
            const filtered = database.filter(item => 
                item.title.toLowerCase().includes(query) ||
                item.tags.some(tag => tag.toLowerCase().includes(query)) ||
                item.transcription.toLowerCase().includes(query) ||
                item.summary.toLowerCase().includes(query)
            );
            
            container.innerHTML = '';
            
            if (filtered.length === 0) {
                container.innerHTML = '<p style="color: #666; text-align: center; padding: 20px;">Nenhum resultado encontrado.</p>';
                return;
            }
            
            filtered.forEach(item => {
                const div = document.createElement('div');
                div.className = 'database-item';
                div.innerHTML = `
                    <strong>${item.title}</strong><br>
                    <small>Processado em: ${formatDate(item.processedAt)} | Tags: ${item.tags.join(', ')}</small>
                `;
                div.onclick = () => showDatabaseItem(item);
                container.appendChild(div);
            });
        }

        function simulateProcessing(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function formatDate(dateString) {
            return new Date(dateString).toLocaleDateString('pt-BR');
        }

        function generateId() {
            return 'id_' + Math.random().toString(36).substr(2, 9);
        }

        function showStatus(message, type = 'info') {
            const statusDiv = document.getElementById('statusMessage');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
            
            if (type === 'success' || type === 'error') {
                setTimeout(() => {
                    statusDiv.innerHTML = '';
                }, 5000);
            }
        }

        // Inicializar banco de dados vazio ao carregar
        window.onload = function() {
            updateDatabaseDisplay();
        };
    </script>
</body>
</html>